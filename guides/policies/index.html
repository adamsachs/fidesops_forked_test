
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://ethyca.github.io/fidesops/guides/policies/">
      
      <link rel="icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.2.5">
    
    
      
        <title>Create Request Policies - Fidesops</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.be71726b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font-family:"Source Sans Pro";--md-code-font-family:""}</style>
      
    
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/default.min.css">
    
      <link rel="stylesheet" href="../../css/fides.css">
    
      <link rel="stylesheet" href="../../css/api.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-configure-request-policies" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Fidesops" class="md-header__button md-logo" aria-label="Fidesops" data-md-component="logo">
      
  <img src="../../img/fides-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Fidesops
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Create Request Policies
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Fidesops" class="md-nav__button md-logo" aria-label="Fidesops" data-md-component="logo">
      
  <img src="../../img/fides-logo.svg" alt="logo">

    </a>
    Fidesops
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        What is Fidesops?
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../use_cases/" class="md-nav__link">
        Use Cases
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Tutorial
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tutorial" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/" class="md-nav__link">
        Zero to Privacy Request
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/installation/" class="md-nav__link">
        Installing Fidesops
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/outline/" class="md-nav__link">
        Outlining our Python Script
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/oauth_client/" class="md-nav__link">
        Creating an Oauth Client
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/postgres_connection/" class="md-nav__link">
        Connecting to Postgres
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/annotate_datasets/" class="md-nav__link">
        Annotating our Database
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/storage_config/" class="md-nav__link">
        Configuring our Storage Destination
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/define_policy/" class="md-nav__link">
        Defining a Policy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/execute_privacy_request/" class="md-nav__link">
        Executing a Privacy Request
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      <label class="md-nav__link" for="__nav_5">
        How-To Guides
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="How-To Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          How-To Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../oauth/" class="md-nav__link">
        Authenticate with OAuth
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../database_connectors/" class="md-nav__link">
        Connect SQL and NoSQL Databases
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../datasets/" class="md-nav__link">
        Configure Datasets
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../query_execution/" class="md-nav__link">
        Preview Query Execution
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Create Request Policies
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Create Request Policies
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-a-request-policy" class="md-nav__link">
    What is a request policy?
  </a>
  
    <nav class="md-nav" aria-label="What is a request policy?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-is-this-different-from-a-fidesctl-policy" class="md-nav__link">
    How is this different from a Fidesctl Policy?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-a-policy-rule" class="md-nav__link">
    What is a Policy Rule?
  </a>
  
    <nav class="md-nav" aria-label="What is a Policy Rule?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rule-attributes" class="md-nav__link">
    Rule attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-validation" class="md-nav__link">
    Rule validation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-a-simple-read-policy" class="md-nav__link">
    Configure a simple read Policy
  </a>
  
    <nav class="md-nav" aria-label="Configure a simple read Policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sample-requests-to-create-a-policy-that-will-read-all-user-provided-identifiable-contact-information" class="md-nav__link">
    Sample requests to create a Policy that will read all user provided identifiable contact information:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-an-erasure-rule" class="md-nav__link">
    Adding an Erasure rule:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../masking_strategies/" class="md-nav__link">
        Configure Data Masking Strategies
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        Configure Storage Destinations
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../privacy_requests/" class="md-nav__link">
        Execute Privacy Requests
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../reporting/" class="md-nav__link">
        Report on Privacy Requests
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../onetrust/" class="md-nav__link">
        Configure OneTrust Integration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../configuration_reference/" class="md-nav__link">
        Configuration Reference
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/" class="md-nav__link">
        Deployment Guide
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        API
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        Development
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../development/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../development/code_style/" class="md-nav__link">
        Code Style
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../development/documentation/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../development/testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../development/pull_requests/" class="md-nav__link">
        Pull Requests
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../development/releases/" class="md-nav__link">
        Releases
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        Community
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Community" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../community/github/" class="md-nav__link">
        GitHub
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../community/code_of_conduct/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../ethyca/" class="md-nav__link">
        About Ethyca
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-a-request-policy" class="md-nav__link">
    What is a request policy?
  </a>
  
    <nav class="md-nav" aria-label="What is a request policy?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-is-this-different-from-a-fidesctl-policy" class="md-nav__link">
    How is this different from a Fidesctl Policy?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-a-policy-rule" class="md-nav__link">
    What is a Policy Rule?
  </a>
  
    <nav class="md-nav" aria-label="What is a Policy Rule?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rule-attributes" class="md-nav__link">
    Rule attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-validation" class="md-nav__link">
    Rule validation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-a-simple-read-policy" class="md-nav__link">
    Configure a simple read Policy
  </a>
  
    <nav class="md-nav" aria-label="Configure a simple read Policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sample-requests-to-create-a-policy-that-will-read-all-user-provided-identifiable-contact-information" class="md-nav__link">
    Sample requests to create a Policy that will read all user provided identifiable contact information:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note" class="md-nav__link">
    Note:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-an-erasure-rule" class="md-nav__link">
    Adding an Erasure rule:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="how-to-configure-request-policies">How-To: Configure Request Policies</h1>
<p>In this section we'll cover:</p>
<ul>
<li>An overview of request Policies</li>
<li>How they differ from Policies in Fidesctl</li>
<li>An overview of Policy Rules and RuleTargets</li>
<li>How to create a simple Policy to access all user provided contact data</li>
<li>How to extend this Policy to mask all user provided contact emails</li>
</ul>
<p>Take me directly to <a href="http://0.0.0.0:8080/docs#/Policy/create_or_update_policies_api_v1_policy_put">api docs</a>.</p>
<h2 id="what-is-a-request-policy">What is a request policy?</h2>
<p>Request policies in Fidesops are pre-configured execution instructions for specific types of privacy requests. To put it simply they enable us to say "when Fidesops receives an identity from a source, apply an action to data within the identity graph that matches specific data categories, and upload the result to a destination".</p>
<h4 id="how-is-this-different-from-a-fidesctl-policy">How is this different from a Fidesctl Policy?</h4>
<p>This is subtly different from the concept of a Policy in Fidesctl. A Fidesctl policy dictates which data categories can be stored where. A Fidesops policy dictates how to access, mask or erase data that matches specific data categories on a given privacy request.</p>
<h2 id="what-is-a-policy-rule">What is a Policy Rule?</h2>
<p>In Fidesops a <code>Policy</code> is made up from a collection of <code>Rule</code>s. A <code>Rule</code> maps an <code>action_type</code> (either <code>erasure</code> or <code>access</code> are supported) to a <code>masking_strategy</code> or a <code>storage_destination</code>. To denote which data the <code>action_type</code>, <code>masking_strategy</code> or <code>storage_destination</code> should apply to, each <code>Rule</code> has a set of <code>RuleTarget</code>s (the Fideslang data categories we wish this data to apply to.). At privacy request execution time, the <code>Rule</code>s for a request's <code>Policy</code> are checked, and target data categories assembled alongside their corresponding fields in the <code>Dataset</code> before being passed into the Fidesops query builder (TODO: Insert link to query builder docs).</p>
<h4 id="rule-attributes">Rule attributes</h4>
<ul>
<li><code>Rule.action_type</code>: Which action is this <code>Rule</code> handling?</li>
<li><code>access</code>: A data subject access request. A user would like to access their own data from within the Fidesops identity graph. Fidesops must look these fields up and return it to them. Fidesops will return these to a <code>storage_destination</code>.</li>
<li><code>erasure</code>: A data subject erasure request (also known in some legislation as the Right to be Forgotten). A user would like to erase their own data currently stored in the Fidesops identity graph. Fidesops must look these fields up and either erase them entirely, or apply a <code>masking_strategy</code>.</li>
<li><code>Rule.storage_destination</code>: Where to upload the returned data. Currently Amazon S3 buckets and local filesystem storage are supported. Google Cloud Storage and Cloudflare S2 are on the near roadmap.</li>
<li><code>Rule.masking_strategy</code>: How to erase data in the Identity Graph that applies to this <code>Rule</code>. See <a href="../masking_strategies/">How-To: Configure Masking Strategies</a> for a full list of supported strategies and their respective configurations.</li>
</ul>
<h4 id="rule-validation">Rule validation</h4>
<p><code>Rule</code> validation has the following constraints:</p>
<ul>
<li>An <code>access</code> rule must specify a pre-configured <code>storage_destination</code>. See <a href="../storage/">How-To: Configure Storage</a> for more information.</li>
<li>An <code>erasure</code> rule must specify a pre-configured <code>masking_strategy</code> See <a href="../masking_strategies/">How-To: Configure Masking Strategies</a> for more information.</li>
<li>Multiple <code>erasure</code> rules on the same <code>Policy</code> must not specify the same target. For example: two <code>Rule</code>s where <code>action_type</code> is set to <code>erasure</code> cannot target the <code>user.provided.identifiable.contact.name</code> data category, because Fidesops wouldn't know which action to apply first. Support for this is intended &lt;&gt; (TODO: Should we keep this sentence?).</li>
<li>Please note: Fideslang data categories are hierarchical, this has the following implications:<ul>
<li><code>user.provided.identifiable.contact</code> will automatically target all other data categories nested under it in the hierarcy, so this will include <code>user.provided.identifiable.contact.name</code>, <code>user.provided.identifiable.contact.address</code> and so forth.</li>
<li><code>Rule</code> validation will treat any nested categories as conflicting targets, since <code>user.provided.identifiable.contact</code> is trying to target everything underneath it in the hierarchy, if we specify a separate erasure rule targetted at <code>user.provided.identifiable.contact.name</code> the Fidesops execution layer will have two options for erasing data that applies to the nested category (in this case <code>user.provided.identifiable.contact.name</code>). Support for this sccenario is intended &lt;&gt; (TODO: Should we keep this sentence?).</li>
</ul>
</li>
</ul>
<h2 id="configure-a-simple-read-policy">Configure a simple read Policy</h2>
<p>As mentioned above:</p>
<blockquote>
<p>An <code>access</code> rule must specify a pre-configured <code>storage_destination</code>.</p>
</blockquote>
<p>To configure a storage destination, see <a href="../storage/">How-To: Configure Storage</a> for more information.</p>
<h4 id="sample-requests-to-create-a-policy-that-will-read-all-user-provided-identifiable-contact-information">Sample requests to create a Policy that will read all user provided identifiable contact information:</h4>
<p><code>PUT api/v1/policy</code></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;A demo policy&quot;</span><span class="p">,</span>
    <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;a-demo-policy&quot;</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">]</span>
</code></pre></div>
</td></tr></table>
<h4 id="note">Note:</h4>
<ul>
<li><code>storage_destination_key</code> should correspond to a previously configured storage destination object. See <a href="../storage/">How-To: Configure Storage</a> for more information.</li>
</ul>
<p><code>PUT api/v1/policy/a-demo-policy/rule</code></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;read identifiable contact data&quot;</span><span class="p">,</span>
    <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;read-identifiable-contact-data&quot;</span><span class="p">,</span>
    <span class="nt">&quot;action_type&quot;</span><span class="p">:</span> <span class="s2">&quot;access&quot;</span><span class="p">,</span>
    <span class="nt">&quot;storage_destination_key&quot;</span><span class="p">:</span> <span class="s2">&quot;your-preconfigured-storage-destination&quot;</span>
  <span class="p">},</span>
<span class="p">]</span>
</code></pre></div>
</td></tr></table>
<p><code>PUT api/v1/policy/a-demo-policy/rule/read-identifiable-contact-data</code></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;data_category&quot;</span><span class="p">:</span> <span class="s2">&quot;user.provided.identifiable.contact&quot;</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">]</span>
</code></pre></div>
</td></tr></table>
<h4 id="adding-an-erasure-rule">Adding an Erasure rule:</h4>
<p><code>PUT api/v1/policy/a-demo-policy/rule</code></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Mask Provided Emails&quot;</span><span class="p">,</span>
    <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;mask-provided-emails&quot;</span><span class="p">,</span>
    <span class="nt">&quot;action_type&quot;</span><span class="p">:</span> <span class="s2">&quot;erasure&quot;</span><span class="p">,</span>
    <span class="nt">&quot;masking_strategy&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;strategy&quot;</span><span class="p">:</span> <span class="s2">&quot;hash&quot;</span><span class="p">,</span>
      <span class="nt">&quot;configuration&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;algorithm&quot;</span><span class="p">:</span> <span class="s2">&quot;SHA-512&quot;</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">]</span>
</code></pre></div>
</td></tr></table>
<p><code>PUT api/v1/policy/a-demo-policy/rule/mask-provided-emails</code></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;data_category&quot;</span><span class="p">:</span> <span class="s2">&quot;user.provided.identifiable.contact.email&quot;</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">]</span>
</code></pre></div>
</td></tr></table>
<p>The <code>Policy</code> specified above will now:</p>
<ul>
<li>Return all data inside the Identity Graph with a data category that matches (or is nested under) <code>user.provided.identifiable.contact</code>.</li>
<li>Mask all data inside the Identity Graph with a data category that matches <code>user.provided.identifiable.contact.email</code> with a the <code>SHA-512</code> hashing function.</li>
</ul>
<p>For more comprehensive information on request Policies, please visit the <a href="/docs#/Policy">api docs</a>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    <nav
      class="md-footer__inner md-grid"
      aria-label="Footer"
    >

      <!-- Link to previous page -->
      
        
        <a
          href="../query_execution/"
          class="md-footer__link md-footer__link--prev"
          aria-label="Previous: Preview Query Execution"
          rel="prev"
        >
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Preview Query Execution
            </div>
          </div>
        </a>
      

      <!-- Link to next page -->
      
        
        <a
          href="../masking_strategies/"
          class="md-footer__link md-footer__link--next"
          aria-label="Next: Configure Data Masking Strategies"
          rel="next"
        >
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Configure Data Masking Strategies
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  


  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.instant"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56a63758.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
      
    
  </body>
</html>